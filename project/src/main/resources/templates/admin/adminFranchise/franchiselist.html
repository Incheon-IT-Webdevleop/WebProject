<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>프랜차이즈 관리</title>
    <link rel="stylesheet" href="/css/admin/sidebar.css">
    <link rel="stylesheet" href="/css/admin/franchiselist.css">
     <script>
function handleSearch(event) {
    var searchInput = document.getElementById('searchInput');
    if (searchInput.value.trim() === '') {
        event.preventDefault();
        alert('검색어를 입력해주세요.');
        return false;
    }
    return true;
}
</script>
</head>
<body>
    <div th:replace="fragments/adminsidebar :: sidebar"></div>
    <div class="content">
        <h1>프랜차이즈 목록</h1>
        <a class="btn-add" th:href="@{/admin/franchise/add}">새 프랜차이즈 추가</a>
        
        
<form th:action="@{/admin/franchise/list}" method="get" onsubmit="return handleSearch(event)">
<input type="text" id="searchInput" name="searchName" th:value="${searchName}" placeholder="프랜차이즈 이름 검색">
    <button type="submit">검색</button>
</form>


        <table>
    <thead>
        <tr>
            <th>ID</th>
            <th>이름</th>
            <th>카테고리</th>
            <th>매장 수</th>
            <th>작업</th>
        </tr>
    </thead>
    <tbody>
        <tr th:each="franchise : ${franchises}">
    <td th:text="${franchise.franchiseIdx}"></td>
    <td>
        <a th:href="@{/franchiseboard(id=${franchise.franchiseIdx})}" class="franchise-link" th:text="${franchise.franchiseTitle}"></a>
    </td>
    <td th:text="${franchise.franchiseSectors}"></td>
    <td th:text="${franchise.franchiseStores}"></td>
    <td>
        <a class="btn-edit" th:href="@{/admin/franchise/edit/{id}(id=${franchise.franchiseIdx})}">수정</a>
        <a class="btn-delete" th:href="@{/admin/franchise/delete/{id}(id=${franchise.franchiseIdx})}" onclick="return confirm('정말 삭제하시겠습니까?');">삭제</a>
    </td>
</tr>
    </tbody>
</table>
        
        <div class="pagination">
    <a th:if="${currentPage > 1}" th:href="@{/admin/franchise/list(page=${currentPage - 1}, searchName=${searchName})}">이전</a>
    <span th:each="pageNum : ${#numbers.sequence(1, totalPages)}">
        <a th:href="@{/admin/franchise/list(page=${pageNum}, searchName=${searchName})}"
           th:text="${pageNum}"
           th:class="${pageNum == currentPage ? 'active' : ''}"></a>
    </span>
    <a th:if="${currentPage < totalPages}" th:href="@{/admin/franchise/list(page=${currentPage + 1}, searchName=${searchName})}">다음</a>
</div>
        
    </div>
</body>
</html>
